Type TRoom    
    ' ########################################################################################################################################################################################################################################################
    ' ####
    ' ####                                                                                                                                                                                                                                 C O N S T A N T S
    ' ####
    ' ########################################################################################################################################################################################################################################################
    
    ' ########################################################################################################################################################################################################################################################
    ' ####
    ' ####                                                                                                                                                                                                                                 V A R I A B L E S
    ' ####
    ' ########################################################################################################################################################################################################################################################
    
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                        NUMERIC
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    
    'Summary: X coordinate of the room in the level. 
    Field _x:Int	
    
    
    'Summary: Y coordinate of the room in the level. 
    Field _y:Int
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                      REFERENCE
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    
    'Summary: Link to the Level instance containing this room. 
    Field _level:TLevel
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                           DATA
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    
    'Summary: Contains the whole room as tiles, it's one dimensional array imitating two dimensions of size 23x21 
    Field _tilesArray:TTile[Settings.ROOM_WIDTH * Settings.ROOM_HEIGHT]
    
    
    ' ########################################################################################################################################################################################################################################################
    ' ####
    ' ####                                                                                                                                                                                                                       P U B L I C   M E T H O D S
    ' ####
    ' ########################################################################################################################################################################################################################################################
    
    Function Create:TRoom(x:Int, y:Int, level:TLevel)
		Local this:TRoom = New TRoom
        this._x     = x
        this._y     = y
        this._level = level
        
		Local l:Int = this._tilesArray.Length
		
		For Local i:Int = 0 Until l
			this._tilesArray[i] = New TTile
		Next
		Return this
    End Function
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                         ACTION
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
	Method SetTileAt(tile:TTile, x:Int, y:Int)
		_tilesArray[x + y * Settings.ROOM_WIDTH] = tile
	End Method
	
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                       CHECKERS
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    Method GetTileAt:TTile(x:Int, y:Int)
		if x < 0 Or y < 0 Or x >= Settings.ROOM_WIDTH Or y >= Settings.ROOM_HEIGHT
			Return GetRoomAt(x, y).GetTileAt(WrapX(x), WrapY(y))
		End If
		
        Return _tilesArray[x + y * Settings.ROOM_WIDTH]
    End Method
	
	Method GetRoomAt:TRoom(x:Int, y:Int)
		if x < 0 Or y < 0 Or x >= Settings.ROOM_WIDTH Or y >= Settings.ROOM_HEIGHT
			Local deltaX:Int
			Local deltaY:Int
			
			if x < 0 
				deltaX = -1
			Elseif x >= Settings.ROOM_WIDTH
				deltaX = 1
			EndIf
			
			if y < 0 
				deltaY = -1
			Elseif y >= Settings.ROOM_HEIGHT
				deltaY = 1
			EndIf
			
			Return _level.getRoomAt(_x + deltaX, _y + deltaY) 
		End If
		
		Return self
	End Method
    
    ' ########################################################################################################################################################################################################################################################
    ' ####
    ' ####                                                                                                                                                                                                                     P R I V A T E   M E T H O D S
    ' ####
    ' ########################################################################################################################################################################################################################################################
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                         ACTION
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                      MODIFIERS
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                       CHECKERS
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    ' ########################################################################################################################################################################################################################################################
    ' ####
    ' ####                                                                                                                                                                                                                 G E T T E R S   /   S E T T E R S
    ' ####
    ' ########################################################################################################################################################################################################################################################
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                        NUMERIC
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                      REFERENCE
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    
    'Summary: Pointer to the level in which the room resides.
    Method GetLevel:TLevel()
        Return _level
    End Method
	
	'Summary: Returns the X position of the room
	Method GetX:Int()
		Return _x
	End Method
	
	'Summary: Returns the X position of the room
	Method GetY:Int()
		Return _y
	End Method
    
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    '                                                                                                                                                                                                                           DATA
    ' -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Method GetTiles:TTile[]()
		Return _tilesArray
	End Method
End Type